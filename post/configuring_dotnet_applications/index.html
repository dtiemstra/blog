<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta property="og:site_name" content>
<meta property="og:type" content="article">
<meta property="og:image" content="dtiemstra.github.io/blog/img/code.jpg">
<meta property="twitter:image" content="dtiemstra.github.io/blog/img/code.jpg">
<meta name=title content="Configuring your .Net applications">
<meta property="og:title" content="Configuring your .Net applications">
<meta property="twitter:title" content="Configuring your .Net applications">
<meta name=description content="Development, Azure, .Net">
<meta property="og:description" content="Development, Azure, .Net">
<meta property="twitter:description" content="Development, Azure, .Net">
<meta property="twitter:card" content="summary">
<meta name=keyword content="Development, Azure, .Net">
<link rel="shortcut icon" href=/dtiemstra.github.io/blog/img/favicon.ico>
<title>Configuring your .Net applications | dtiemstra.github.io</title>
<link rel=canonical href=dtiemstra.github.io/blog/post/configuring_dotnet_applications/>
<link rel=stylesheet href=/dtiemstra.github.io/blog/css/bootstrap.min.css>
<link rel=stylesheet href=/dtiemstra.github.io/blog/css/hugo-theme-cleanwhite.min.css>
<link rel=stylesheet href=/dtiemstra.github.io/blog/css/zanshang.css>
<link rel=stylesheet href=/dtiemstra.github.io/blog/css/font-awesome.all.min.css>
<link rel=stylesheet href=dtiemstra.github.io/blog/css/overrides.css>
<script src=/dtiemstra.github.io/blog/js/jquery.min.js></script>
<script src=/dtiemstra.github.io/blog/js/bootstrap.min.js></script>
<script src=/dtiemstra.github.io/blog/js/hux-blog.min.js></script>
<script src=/dtiemstra.github.io/blog/js/lazysizes.min.js></script>
</head>
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
<div class=container-fluid>
<div class="navbar-header page-scroll">
<button type=button class=navbar-toggle>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<a class=navbar-brand href=/dtiemstra.github.io/blog/></a>
</div>
<div id=huxblog_navbar>
<div class=navbar-collapse>
<ul class="nav navbar-nav navbar-right">
<li>
<a href=/dtiemstra.github.io/blog/>All Posts</a>
</li>
<li>
<a href=/dtiemstra.github.io/blog/categories/tech/>tech</a>
</li>
<li>
<a href=/dtiemstra.github.io/blog/search><i class="fa fa-search"></i></a>
</li>
</ul>
</div>
</div>
</div>
</nav>
<script>var $body=document.body,$toggle=document.querySelector('.navbar-toggle'),$navbar=document.querySelector('#huxblog_navbar'),$collapse=document.querySelector('.navbar-collapse');$toggle.addEventListener('click',handleMagic);function handleMagic(a){$navbar.className.indexOf('in')>0?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf('in')<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}</script>
<style type=text/css>header.intro-header{background-image:url(/dtiemstra.github.io/blog/img/code.jpg)}</style>
<header class=intro-header>
<div class=container>
<div class=row>
<div class="col-lg-8 col-lg-offset-1 col-md-10 col-md-offset-1">
<div class=post-heading>
</div>
</div>
</div>
</div>
</header>
<div class=container>
<div class="col-lg-8 col-lg-offset-1
col-md-10 col-md-offset-1
post-container">
<h1>Configuring your .Net applications</h1>
<h2 class=subheading></h2>
<p>Configuration is a crucial aspect of any software application. It allows developers to separate application logic from its configuration, making it easier to manage, maintain, and deploy the application. In .NET applications, configuration is typically managed using the ConfigurationManager class, which can be used to make settings from different sources available to your application. The order in which these sources are registered is important because your application starts, it loads the configuration providers in the order they are configured. Furthermore, if a configuration source is loaded and the key already exists in a configuration provider that is registered earlier, it overwrites the previous value.</p>
<p>
<img src=/img/configuration/providers.png alt=validation>
</p>
<h3 id=validating-your-settings>Validating your settings</h3>
<p>The .NET Options framework is a powerful and flexible feature that allows developers to configure their .NET applications with ease. It simplifies the process of reading configuration data from various sources such as environment variables, command-line arguments, and JSON files, and makes it available to the application through strongly typed classes.</p>
<p>The Options framework also supports validation of configuration data, which helps to catch errors early in the development process. It allows developers to define constraints on configuration options, such as minimum and maximum values, required fields, and regular expression patterns. If any of the validation rules fail, the framework throws an exception, making it easy to diagnose and fix the issue.</p>
<p>The OptionBuilder class in the .NET Options framework contains several (extension)methods for validating configuration options, such as Validate, ValidateDataAnnotations and ValidateOnStart.</p>
<p>While you can certainly write your own custom validation logic using the Validate and ValidateWith methods, the ValidateDataAnnotations method provides an easy way to leverage the power of the System.ComponentModel.DataAnnotations namespace. This namespace contains a set of validation attributes, such as RequiredAttribute, StringLengthAttribute, and RegularExpressionAttribute, which can be applied to properties in your configuration class to enforce validation rules.</p>
<p>To use DataAnnotations for configuration validation, you need to create a configuration class with properties that represent the configuration settings and decorate the properties with specific attributes. For example, if your application needs some custom settings, you might create a class like this:</p>
<pre tabindex=0><code>public class MySettings
{
    [Required]
    public string MySetting1 { get; set; } = string.Empty;

    [Range( 1, 10)]
    public int MySetting2 { get; set; }
}
</code></pre><p>In this example, the MySetting1 property is marked as required using the Required attribute. This means that if this property is not present in one of the configurationproviders, an exception will be thrown when the configuration class is loaded. The MySetting2 property must have a configured value between 1 and 100.</p>
<p>
<img src=/img/configuration/data-annotations.png alt=validation>
</p>
<p>By using DataAnnotations for configuration validation, you can ensure that your application&rsquo;s configuration is always valid and complete. This can help prevent errors and improve the overall stability and reliability of your application.</p>
<h3 id=but-be-aware>But be aware&mldr;&mldr;</h3>
<p>While DataAnnotations are a useful tool for validating configuration settings in .NET applications, it&rsquo;s important to note that they cannot be used to validate nested objects.</p>
<p>In other words, if your configuration class contains properties that are themselves complex objects, you cannot apply DataAnnotations to those nested objects.</p>
<p>For example, let&rsquo;s change our configuration class a little bit and add a property of the same MySettings type.</p>
<pre tabindex=0><code>public class MySettings
{
    [Required]
    public string MySetting1 { get; set; } = string.Empty;

    [Range( 1, 10)]
    public int MySetting2 { get; set; }

    public MySettings NestedSettings { get; set; }
}
</code></pre><p>If we provide the following configuration to the application we expect an exception that the NestedSettings.MySettings1 is required just as we saw in the example earlier.</p>
<pre tabindex=0><code>{
  &quot;MySettings&quot;: {
    &quot;MySetting1&quot;: &quot;MySetting1Value&quot;,
    &quot;MySetting2&quot;: &quot;MySetting2Value&quot;,
    &quot;NestedSettings&quot;: {
      &quot;MySetting2&quot;: &quot;MySetting2Value&quot;
    }
  }
}
</code></pre><p>However, in this case the application starts without throwing an exception. As mentioned before, this is because DataAnnotion attributes on nested objects are not evaluated.
In this scenario it&rsquo;s up to you to write your own custom validation logic. More information (and a solution to this problem) can be found on the <a href=https://github.com/dotnet/runtime/issues/36093 target=_blank rel=noopener>Microsoft .NET Github page</a>
</p>
<hr>
<ul class=pager>
<li class=next>
<a href=dtiemstra.github.io/blog/post/lambda_batches/ data-toggle=tooltip data-placement=top title="Prevent valid messages from being rejected by AWS Lambda">Next
Post &rarr;</a>
</li>
</ul>
</div>
<div class="col-lg-3 col-lg-offset-0
col-md-3 col-md-offset-0
col-sm-12
col-xs-12
sidebar-container">
<section class="visible-md visible-lg">
<div class=short-about>
<p>A blog about .Net, Azure, software development and my personal expreriences as a software developer. Opinions are my own.</p>
<ul class=list-inline>
<li>
<a target=_blank href=https://github.com/dtiemstra>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a target=_blank href=https://www.linkedn.com/in/dtiemstra>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a target=_blank href=https://stackoverflow.com/users/dtiemstra>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
</ul>
</div>
</section>
<section>
<hr class="hidden-sm hidden-xs">
<h5>FEATURED TAGS</h5>
<div class=tags>
<a href=/dtiemstra.github.io/blog/tags/.net title=.net>
.net
</a>
</div>
</section>
</div>
<footer>
<div class=container>
<div class=row>
<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
<ul class="list-inline text-center">
<li>
<a target=_blank href=https://github.com/dtiemstra>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a target=_blank href=https://www.linkedn.com/in/dtiemstra>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a target=_blank href=https://stackoverflow.com/users/dtiemstra>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
</ul>
<p class="copyright text-muted">
Copyright &copy; 2023
<br>
<a href=https://themes.gohugo.io/hugo-theme-cleanwhite>CleanWhite Hugo Theme</a> by <a href=https://zhaohuabing.com>Huabing</a> |
<iframe style=margin-left:2px;margin-bottom:-5px frameborder=0 scrolling=0 width=100px height=20px src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true"></iframe>
</p>
</div>
</div>
</div>
</footer>
<script>function loadAsync(f,b){var c=document,d='script',a=c.createElement(d),e=c.getElementsByTagName(d)[0];a.src=f,b&&a.addEventListener('load',function(a){b(null,a)},!1),e.parentNode.insertBefore(a,e)}</script>
<script>$('#tag_cloud').length!==0&&loadAsync("/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:'#bbbbee',end:'#0085a1'}},$('#tag_cloud a').tagcloud()})</script>
<script>loadAsync("https://cdn.jsdelivr.net/npm/fastclick@1.0.6/lib/fastclick.min.js",function(){var a=document.querySelector("nav");a&&FastClick.attach(a)})</script>
<script type=text/javascript>function generateCatalog(a){_containerSelector='div.post-container';var h=$(_containerSelector),c,d,e,f,g,b;return c=h.find('h1,h2,h3,h4,h5,h6'),$(a).html(''),c.each(function(){d=$(this).prop('tagName').toLowerCase(),g="#"+$(this).prop('id'),e=$(this).text(),b=$('<a href="'+g+'" rel="nofollow">'+e+'</a>'),f=$('<li class="'+d+'_nav"></li>').append(b),$(a).append(f)}),!0}generateCatalog(".catalog-body"),$(".catalog-toggle").click(function(a){a.preventDefault(),$('.side-catalog').toggleClass("fold")}),loadAsync("/dtiemstra.github.io/blog/js/jquery.nav.js",function(){$('.catalog-body').onePageNav({currentClass:"active",changeHash:!1,easing:"swing",filter:"",scrollSpeed:700,scrollOffset:0,scrollThreshold:.2,begin:null,end:null,scrollChange:null,padding:80})})</script>
</body>
</html>